{% extends "base.html" %}
{% block title %}Reset Password{% endblock %}

{% block content %}

<form method="post" action="{{ url_for('auth.reset_password') }}">
    <h2 align="center" style="font-weight: bold;">Reset Password</h2>

    <div class="form-group">
        <label for="email">Email</label>
        <input type="email" class="form-control" name="email" id="email" placeholder="Enter your email"
               value="{{ email }}" required {% if show_password_fields or show_otp_field %} readonly {% endif %}>
    </div>

    {% if show_otp_field %}
        <div class="form-group">
            <label for="otp">OTP</label>
            <input type="text" class="form-control" name="otp" id="otp" placeholder="Enter OTP" required>
        </div>
        <center>
            <button type="submit" class="btn btn-primary">Submit OTP</button>
            <button type="button" class="btn btn-secondary" onclick="resendOtp()">Resend OTP</button>
        </center>
    {% endif %}

    {% if show_password_fields %}
        <div class="form-group">
            <label for="password">New Password</label>
            <input type="password" class="form-control" name="password" id="password" placeholder="Enter new password" required>
        </div>
        <div class="form-group">
            <label for="confirm_password">Confirm New Password</label>
            <input type="password" class="form-control" name="confirm_password" id="confirm_password" placeholder="Confirm new password" required>
        </div>
        <center>
            <button type="submit" class="btn btn-primary">Submit</button>
        </center>
    {% endif %}

    {% if not show_password_fields and not show_otp_field %}
        <center>
            <button type="submit" class="btn btn-primary">Submit</button>
        </center>
    {% endif %}
</form>

<script>
    function resendOtp() {
        window.location.reload();
    }
</script>

{% endblock %}
